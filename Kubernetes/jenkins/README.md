# Jenkins

### Create a service account
Run the following command to apply the spec:

`kubectl apply -f jenkins-sa.yaml`

Open the jenkins-values.yaml file in your favorite text editor and modify the following:

`storageClass: jenkins-pv`

serviceAccount: the serviceAccount section of the jenkins-values.yaml file should look like this:

```
serviceAccount:
create: false
# Service account name is autogenerated by default
name: jenkins
annotations: {}
```

Run the following command:

`$ jsonpath="{.data.jenkins-admin-password}"
$ kubectl get secret -n jenkins jenkins -o jsonpath=$jsonpath`

Get the name of the Pod running that is running Jenkins using the following command:

`$ kubectl get pods -n jenkins`

Use the kubectl command to set up port forwarding:

`$ kubectl -n jenkins port-forward <pod_name> 8080:8080
Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080`

### Deploy Jenkins

`kubectl create ns jenkins`

`kubectl create -f jenkins-deployment.yaml -n jenkins`

`kubectl create -f jenkins-service.yaml -n jenkins`

`$ kubectl -n jenkins port-forward <pod_name> 8080:8080`

`$ kubectl logs <pod_name> -n jenkins`


The password is at the end of the log formatted as a long alphanumeric string:

```
*************************************************************
*************************************************************
*************************************************************

Jenkins initial setup is required.
An admin user has been created and a password generated.
Please use the following password to proceed to installation:

94b73ef6578c4b4692a157f768b2cfef

This may also be found at:
/var/jenkins_home/secrets/initialAdminPassword

*************************************************************
*************************************************************
*************************************************************
```
